#include "textmode.h"

const SDL_Color dos_palette[DOS_NUMCOLORS] = {
    { 0x00, 0x00, 0x00, 0xFF },
    { 0x00, 0x00, 0xAA, 0xFF },
    { 0x00, 0xAA, 0x00, 0xFF },
    { 0x00, 0xAA, 0xAA, 0xFF },
    { 0xAA, 0x00, 0x00, 0xFF },
    { 0xAA, 0x00, 0xAA, 0xFF },
    { 0xAA, 0x55, 0x00, 0xFF },
    { 0xAA, 0xAA, 0xAA, 0xFF },
    { 0x55, 0x55, 0x55, 0xFF },
    { 0x55, 0x55, 0xFF, 0xFF },
    { 0x55, 0xFF, 0x55, 0xFF },
    { 0x55, 0xFF, 0xFF, 0xFF },
    { 0xFF, 0x55, 0x55, 0xFF },
    { 0xFF, 0x55, 0xFF, 0xFF },
    { 0xFF, 0xFF, 0x55, 0xFF },
    { 0xFF, 0xFF, 0xFF, 0xFF }
};

void
DOS_SetColor(SDL_Renderer * renderer, DOS_Color color)
{
    const SDL_Color * c = &dos_palette[color];
    SDL_SetRenderDrawColor(renderer, c->r, c->g, c->b, 0xFF);
}

void
DOS_SetColorAlpha(SDL_Renderer * renderer, DOS_Color color, uint8_t alpha)
{
    const SDL_Color * c = &dos_palette[color];
    SDL_SetRenderDrawColor(renderer, c->r, c->g, c->b, alpha);
}

SDL_Color DOS_CGAToSDL(DOS_Color color)
{
    SDL_Color result;
    result.r = dos_palette[color].r;
    result.g = dos_palette[color].g;
    result.b = dos_palette[color].b;
    result.a = 0xFF;
    
    return result;
}
